@using TMDT.Services
@model IEnumerable<TMDT.Models.Product>

@{
	ViewData["Title"] = "ProductList";
	CategoryService _categoryService = new CategoryService();
}
<style>
	td, th {
		text-align: center;
	}

	#mid_icon {
		padding-top: 38px;
		text-align: center;
	}

	#mid {
		text-align: center;
		padding-top: 45px;
	}

	#btn_action {
		width: 40px;
		height: 40px;
		border: none;
		margin-right: 5px;
		border-radius: 10px;
	}
</style>
<h1>Product List</h1>

@using (Html.BeginForm("Adm_CreateProduct", "Product", FormMethod.Get))
{
	<button type="submit" id="btn_action" class="btn btn-primary" style="color:aliceblue">
		<i class="fa-solid fa-plus"></i>
	</button>
}
<table class="table">
	<thead>
		<tr>
			<th>
				@Html.DisplayNameFor(model => model.ProductId)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.Name)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.Description)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.Price)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.LastPrice)
			</th>
			<th>
				Category
			</th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		@foreach (var item in Model)
		{
			<tr>
				<td>
					@Html.DisplayFor(modelItem => item.ProductId)
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.Name)
				</td>
				<td>
					<p style="white-space:pre-line;text-align:left">@item.Description</p>
				</td>
				<td>
					@item.Price
				</td>
				<td>
					@item.LastPrice
				</td>
				<td>
					@_categoryService.GetCategoryByCategoryId(item.CategoryId).Name
				</td>
				<td style="display:flex;justify-content:center">


					@using (Html.BeginForm("Adm_UpdateProduct", "Product", new { id = item.ProductId }, FormMethod.Get))
					{
						<button type="submit" id="btn_action" class="btn btn-primary">
							<i class="fa fa-refresh" aria-hidden="true"></i>
						</button>
					}
					@using (Html.BeginForm("Adm_UpdateProduct", "Product", new { id = item.ProductId }, FormMethod.Get))
					{
						<button type="submit" id="btn_action" class="btn btn-info" style="color:aliceblue">
							<i class="fa-solid fa-info"></i>
						</button>
					}
					@using (Html.BeginForm("Adm_DeleteProduct", "Product", new { id = item.ProductId }))
					{
						<button type="submit" id="btn_action" class="btn btn-danger">
							<i class="fa-solid fa-trash"></i>
						</button>
					}
				</td>
			</tr>
		}
	</tbody>
</table>
